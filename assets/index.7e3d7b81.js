import{f as e,g as s,h as l,i as a,j as i,w as n,t as o,r as d,o as t,c as q,k as c,l as r,F as u,m,n as g,p,q as v}from"./vendor.6472261a.js";var f=e({name:"nav",setup:()=>{const e=()=>{localStorage.setItem("navMenu",JSON.stringify(d))};let d=s([]),t=localStorage.getItem("navMenu");d=t&&JSON.parse(t).length?JSON.parse(t):[{name:"网站1",id:"web1",children:[{name:"网站5",id:"web5",list:[{name:"掘金",desc:"掘金是一个帮助开发者成长的社区,是给开发者用的Hacker News,给设计师用的Designer News,和给产品经理用的Medium。",icon:"",url:"https://juejin.cn/"},{name:"xxxx1",desc:"qqqqqqqqqqqq1ssssssssssssssssssssssssssssssssssssssssssssssssssssssqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",icon:""},{name:"掘金",desc:"掘金是一个帮助开发者成长的社区,是给开发者用的Hacker News,给设计师用的Designer News,和给产品经理用的Medium。",icon:"",url:"https://juejin.cn/"},{name:"xxxx1",desc:"qqqqqqqqqqqq1ssssssssssssssssssssssssssssssssssssssssssssssssssssssqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",icon:""}]},{name:"网站6",id:"web6",list:[{name:"掘金",desc:"掘金是一个帮助开发者成长的社区,是给开发者用的Hacker News,给设计师用的Designer News,和给产品经理用的Medium。",icon:"",url:"https://juejin.cn/"},{name:"xxxx1",desc:"qqqqqqqqqqqq1ssssssssssssssssssssssssssssssssssssssssssssssssssssssqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",icon:""}]}]},{name:"网站2",id:"web2",list:[]}],window.addEventListener("beforeunload",e,!1),l((()=>{window.removeEventListener("beforeunload",e,!1)}));let q=a(!1),c=s({name:[{required:!0,message:"请输入网站名称",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100 个字符",trigger:"blur"}],url:[{required:!0,message:"请输入网站网址",trigger:"blur"}],desc:[{min:3,max:255,message:"长度在 3 到 255 个字符",trigger:"blur"}],icon:[{required:!0,message:"请上传网站图标",trigger:"blur"}]}),r=s({data:{},type:"",parent:{}});const u=i((()=>d.length?m(d,[]):[])),m=(e,s)=>(e.forEach((e=>{e.list&&s.push(e),e.children&&(s=m(e.children,s))})),s),g=a(),p=e=>{if("addNav"==r.type)e.list?e.list.push(r.data):e.list=[r.data];else if("editNav"==r.type){let s=e.list.findIndex((e=>e.name===r.data.name));e.list.splice(s,1,r.data)}else r.type};return n((()=>d),((e,s)=>{console.log("111watch",e,s)}),{deep:!0}),{navList:u,navMenu:d,defaultIcon:"./assets/logo.03d6d6da.png",goToUrl:e=>{e.url&&(window.location.href=e.url)},goToNavList:e=>{var s;let l="#"+e.id;null==(s=document.querySelector(l))||s.scrollIntoView({behavior:"smooth"})},dialogVisible:q,submitDialog:()=>{var e;console.log("aa111",g.value),null==(e=g.value)||e.validate((e=>{var s,l,a,i;if(!e)return!1;for(let n=0;n<d.length;n++){if(d[n].name===(null==(s=r.parent)?void 0:s.name)){p(d[n]);break}if(null==(a=null==(l=d[n])?void 0:l.children)?void 0:a.length)for(let e=0;e<d[n].children.length;e++)if(d[n].children[e].name===(null==(i=r.parent)?void 0:i.name)){p(d[n].children[e]);break}}q.value=!1}))},openDialog:(e,s,l)=>{r.data=o(s),r.type=e,r.parent=o(l),q.value=!0},dialogRules:c,uploadIcon:()=>{},dialog:r,dialogDataRef:g}}});const h={class:"nav-index"},b={class:"nav-menu"},x={class:"nav-list"},k={class:"nav-content"},w=c("i",{class:"el-icon-close"},null,-1),V={class:"nav-box-inner"},y={class:"nav-icon"},_={class:"nav-icon-right"},C={class:"nav-name ellipsis"},N={class:"nav-desc ellipsis"},D=c("div",{class:"image-slot"},[c("i",{class:"el-icon-picture-outline"})],-1),I=p("网站图标"),M=p("自定义图标"),j={class:"dialog-footer"},L=p("取 消"),U=p("确 定");f.render=function(e,s,l,a,i,n){const o=d("el-menu-item"),f=d("el-submenu"),R=d("el-menu"),S=d("el-button"),T=d("el-image"),E=d("el-form-item"),H=d("el-input"),J=d("el-upload"),O=d("el-form"),F=d("el-dialog");return t(),q("div",h,[c("div",b,[c("img",{src:e.defaultIcon,alt:"icon",class:"nav-image"},null,8,["src"]),c(R,{class:"nav-el-menu"},{default:r((()=>[(t(!0),q(u,null,m(e.navMenu,((s,l)=>(t(),q("div",{key:l},[s.children&&s.children.length?(t(),q(f,{key:0,index:l},{title:r((()=>[c("i",{class:s.icon||"el-icon-star-off"},null,2),c("span",null,g(s.name),1)])),default:r((()=>[(t(!0),q(u,null,m(s.children,((s,a)=>(t(),q("div",{key:a,onClick:l=>e.goToNavList(s),class:"menu-children"},[c(o,{index:l+"-"+a},{title:r((()=>[p(g(s.name),1)])),default:r((()=>[c("i",{class:s.icon||"el-icon-star-off"},null,2)])),_:2},1032,["index"])],8,["onClick"])))),128))])),_:2},1032,["index"])):(t(),q(o,{key:1,index:l,onClick:l=>e.goToNavList(s)},{title:r((()=>[p(g(s.name),1)])),default:r((()=>[c("i",{class:s.icon||"el-icon-star-off"},null,2)])),_:2},1032,["index","onClick"]))])))),128))])),_:1}),c(S,{type:"primary",onClick:s[1]||(s[1]=s=>e.openDialog("addDir",e.item)),icon:"el-icon-circle-plus-outline"})]),c("div",x,[(t(!0),q(u,null,m(e.navList,((s,l)=>(t(),q("div",{key:l,class:"nav-wrap"},[c("div",{class:"nav-header",id:s.id},[c("i",{class:s.icon||"el-icon-s-flag"},null,2),p(g(s.name),1),c("i",{class:"el-icon-circle-plus-outline",onClick:l=>e.openDialog("addNav",{icon:e.defaultIcon},s)},null,8,["onClick"])],8,["id"]),c("div",k,[(t(!0),q(u,null,m(s.list,((l,a)=>(t(),q("div",{key:a,class:"nav-box",onClick:s=>e.goToUrl(l)},[w,c("div",V,[c("div",y,[c("img",{src:l.icon||e.defaultIcon,alt:"icon"},null,8,["src"])]),c("div",_,[c("p",C,g(l.name),1),c("p",N,g(l.desc),1)])]),c("i",{class:"el-icon-edit-outline",onClick:v((a=>e.openDialog("editNav",l,s)),["stop"])},null,8,["onClick"])],8,["onClick"])))),128))])])))),128))]),c(F,{title:"提示",modelValue:e.dialogVisible,"onUpdate:modelValue":s[7]||(s[7]=s=>e.dialogVisible=s),width:"30%"},{footer:r((()=>[c("span",j,[c(S,{onClick:s[6]||(s[6]=s=>e.dialogVisible=!1)},{default:r((()=>[L])),_:1}),c(S,{type:"primary",onClick:e.submitDialog},{default:r((()=>[U])),_:1},8,["onClick"])])])),default:r((()=>[c(O,{model:e.dialog.data,rules:e.dialogRules,ref:"dialogDataRef","label-width":"120px"},{default:r((()=>[c(E,{"label-width":"0"},{default:r((()=>[c(T,{style:{width:"68px",height:"68px"},src:e.dialog.data.icon||e.defaultIcon,fit:"cover"},{error:r((()=>[D])),_:1},8,["src"])])),_:1}),c(E,{label:"网站名称:",prop:"name"},{default:r((()=>[c(H,{modelValue:e.dialog.data.name,"onUpdate:modelValue":s[2]||(s[2]=s=>e.dialog.data.name=s),modelModifiers:{trim:!0}},null,8,["modelValue"])])),_:1}),c(E,{label:"网站网址:",prop:"url"},{default:r((()=>[c(H,{modelValue:e.dialog.data.url,"onUpdate:modelValue":s[3]||(s[3]=s=>e.dialog.data.url=s),modelModifiers:{trim:!0}},null,8,["modelValue"])])),_:1}),c(E,{label:"网站介绍:",prop:"desc"},{default:r((()=>[c(H,{modelValue:e.dialog.data.desc,"onUpdate:modelValue":s[4]||(s[4]=s=>e.dialog.data.desc=s),modelModifiers:{trim:!0}},null,8,["modelValue"])])),_:1}),c(E,{label:"图标URL:",prop:"icon"},{default:r((()=>[c(H,{modelValue:e.dialog.data.icon,"onUpdate:modelValue":s[5]||(s[5]=s=>e.dialog.data.icon=s),modelModifiers:{trim:!0}},null,8,["modelValue"])])),_:1}),c(E,{label:"主页图标:"},{default:r((()=>[c(J,{class:"upload-demo",action:"https://jsonplaceholder.typicode.com/posts/","on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,multiple:"",limit:3,"on-exceed":e.handleExceed,"file-list":e.fileList},{trigger:r((()=>[c(S,{onClick:e.uploadIcon},{default:r((()=>[M])),_:1},8,["onClick"])])),default:r((()=>[c(S,null,{default:r((()=>[I])),_:1})])),_:1},8,["on-preview","on-remove","before-remove","on-exceed","file-list"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])};export default f;
